'use strict';

let answerKey = 0;
let questionNum = 0;


//rendering start page- start button function
$(document).ready(function(){ 
    $('.click-to-start').click(function(){
     $('.main-page').hide();
     $('.results-page').hide();
     $('.next-page').show();
     displayQuestion();
     $('.quiz-score').text('Current Score: '+answerKey);
     console.log('Quiz Button Clicked')
   })
 })
 
   //making the next button function 

   $('.next-button').click(function(event){
    console.log('Next button clicked');
    displayQuestion();
    $('.next').hide();
    $('.submit-answer').show();
  });  

  //now the submit button function with if else statement to ensure they choose

    $('.submit-answer').click(function(event){
        if($('.li.selected').length) {
            let answer = $('li.selected').attr('id')
            checkAnswer(answer)
            $('.next').show();
            $('.submit-answer').hide();
        } else {
            alert('Not Yet!')
        }
    })

//restart button so they can do it all over

    $('.restart').click(function(){
        location.reload();
          console.log('Restarting');
        });

// make the questions appear on the screen 1 at a time 

        function displayQuestion(){
            if (questionNum < QUESTIONLIST.length){
                return `
                    <section class = "displayQuestionPage">
                    <h2>${QUESTIONLIST[questionNum].question}</h2>
            
                <form> 
                    <fieldset>
                    <div class="answerChoices">
                      <input type="radio" name="answerButton" value="answer"
                      checked><span>${QUESTIONLIST[questionNum].answers[0]}</span>
                      </label>
            
                      <label>
                      <input type="radio" name="answerButton" value="answer"
                      checked><span>${QUESTIONLIST[questionNum].answers[1]}</span>
                      </label>
            
                      <label>
                      <input type="radio" name="answerButton" value="answer"
                      checked><span>${QUESTIONLIST[questionNum].answers[2]}</span>
                      </label>
            
                      <label>
                      <input type="radio" name="answerButton" value="answer"
                      checked><span>${QUESTIONLIST[questionNum].answers[3]}</span>
                      </label>
            
            </div>
                </fieldset>
                    </form>
                        </section>`
            
               } else {
                   finalScore();
                   restartQuiz();
               }
            };

//check answers 
          function checkAnswer(answers){
            let listQuestion = QUESTIONLIST[current];
            if(listQuestion.rightAnswer == answers){
              answerKey++;
             
            } else {
             
            }
            $('.score').text('Current Score: '+answerKey);
            current++;
        



checkAnswer();
displayQuestion();





----------------------------------
let answerKey = 0;
let questionNum = 0;


function displayQuestion() {
  if (questionNum < QUESTIONLIST.length){
return `
<section class = 'questionPage'>
  <h2 class="list-question">${QUESTIONLIST[questionNum].question}</h2>
    <form>
      <fieldset>
          <label>
          <input type="radio" name="answerButton" value="answer"
          checked><span>${QUESTIONLIST[questionNum].answers[0]}</span>
          </label>

          <label>
          <input type="radio" name="answerButton" value="answer"
          checked><span>${QUESTIONLIST[questionNum].answers[1]}</span>
          </label>

          <label>
          <input type="radio" name="answerButton" value="answer"
          checked><span>${QUESTIONLIST[questionNum].answers[2]}</span>
          </label>

          <label>
          <input type="radio" name="answerButton" value="answer"
          checked><span>${QUESTIONLIST[questionNum].answers[3]}</span>
          </label>

          <button type="submit" class="submitButton">Are you sure?</button>
        </fieldset>  
      
       </form> 
     </section> `;
} else {
  finalScore();
  restartQuiz();
}
}


//Make the quiz start!! 
function startButton() {
 $('.start-page').on('click', '.js-start-button', function(event){
  $('.start-page').hide();
  $('.question-pages').html();
})
}

//Display the question page ** make it work! 

function renderQuestionPage() {

  $('.questionPages').html(displayQuestion());
}

//make the button functional and determinate


function submitAnswer() {
$('.questionPages').on('click', '.js-submit-answer', function(event) {
  event.preventDefault();

  let answer = ('input:checked').siblings('span');
  let correctAnswer = checkAnswer(answer);

  if(correctAnswer) {
    return handleRightAnswer()
  } else {
    return handleWrongAnswer();
  }
})
}

//determine if the answer chosen is correct 

function checkAnswer(answer) {
  
}

// give reaction for right answer
function handleRightAnswer() {
  $('.questionPages').html(rightAnswerPrompt)

  iterateAnswerKey();

}

let rightAnswerPrompt = `
<section class=answerFeedback>
  <h2>Cheers! Looks like I've got some competition!</h2>
  <img src="ANSWERRIGHT.gif" alt="Sincerity is Scary Dancing">
  <button class ="nextButton">FORWARD MATE</button>
  </section>

  `;
//give reaction for the wrong answer
function handleWrongAnswer(){
  $('.questionPages').html(wrongAnswerPrompt)

  iterateAnswerKey();

}

let wrongAnswerPrompt = `
<section class=answerFeedback>
  <h2>Bollocks, seems like you still got some googling to do!</h2>
  <img src="ANSWERWRONG.gif" alt ="Matty singing">
  <button class="nextButton">MOVING ON</button>
  </section>

`;

// the button for the Quiz pages to move it along
function nextButton() {
  $('.questionPages').on('click', '.nextButton',
  function(event) {
    if (questionNum === QUESTIONLIST.length) {
      finalScore();
    }else {
      iterateQuestionNum();
      iterateAnswerKey();
    }
  })};


//move through the questions 
  function iterateQuestionNum() {
    questionNum++;
  }
//move through the answers to check 
  function iterateAnswerKey() {
    answerKey++; 
  }

//final page for results 
function finalScore() {
$('.results-page').html(`
<section class="finalPage">
 <h2> The verdict is in! </h2>
  <h3> ${answerKey}/10</h3>
  
  <button class="restart-quiz js-restart-quiz">
    <span class="button-label">Restart</span>
  </button>
</section>
`);

}

function restartQuiz () {
  ('main').on('click', 'js-restart-quiz', function(event) {
  location.reload();
  })
};


function handleQuizApp(){
renderQuestionPage(); 
displayQuestion();
startButton();
checkAnswer();
submitAnswer();
handleRightAnswer();
handleWrongAnswer();
nextButton();
finalScore();
}

$(handleQuizApp);



//////// END OF CURRENT WORKING QUIZ 1/24

function runQuizApp(){
renderQuestionPage()
quizStartPage()
generateQuestionPage()
startQuizButton()
handleSubmitButton()
calculateAnswer()
renderResultsPage()
nextQuestionButton()
finalScore()
restartButton()

}